- 싱글 스레드 언어인 자바스크립트에서 **동시성을 지원**하기 위해 도입한 **비동기 방식을 활용**하여 여러 작업을 동시에 처리할 수 있습니다.
- **자바스크립트 코드 자체는 Main Call Stack에서 실행**되고, 비동기로 요청한 작업은 **멀티 스레드 기반의 호스트 환경**에서 처리됩니다.
- 자바스크립트의 호스트 환경은 웹 브라우저와 Node.js 런타임이 있고, 각 환경에 따라 실제 이벤트 루프 구현 방식에는 차이가 있으나 모두 **이벤트 기반** 프로그래밍으로 이벤트에 의해 실행 흐름이 결정됩니다.

## 이벤트 루프
- [개념] 이벤트 루프란 자바스크립트의 비동기 프로그래밍을 지원하는 핵심으로, 호스트 환경에서 비동기 작업을 관리하고 처리하기 위한 **동작 방식**을 의미합니다.
1. Main Call Stack에서 요청한 비동기 작업을 처리합니다. 
2. 작업이 완료되면 콜백이나 이벤트로 큐에 등록합니다. 
3. Main Call Stack의 기존 작업이 모두 완료되어 비어지면 큐에서 Main Call Stack으로 이동시켜 작업을 마무리합니다.

## 웹 브라우저 환경
### Web API
- Web API는 타이머, 네트워크 요청, 파일 입출력, 이벤트 처리 등 브라우저에서 제공하는 API를 의미합니다.
- Web API에는 DOM, XMLHttpRequest, Timer, Console, Canvas, Geolocation 등이 있습니다.
- 각 Web API마다 해당 요청 작업을 처리하는 스레드가 있습니다.
	- `setTimeout`와 같이 타이머 함수로 요청한 비동기 작업은 Timer API에서 Timer Thread에서 수행됩니다.
	- `fetch`와 같은 데이터 요청 관련 비동기 작업은 네트워크 스레드에서 네트워크 요청 및 응답을 처리합니다.
### Queue 종류
- 작업의 종류에 따라 추가되는 Queue가 다르고, Queue의 종류에 따라 이벤트 루프가 Main Call Stack으로 이동시키는 순서가 다릅니다. 
- 작업의 우선순위는 `Microtask queue -> Render Queue -> (Macro)Task Queue` 순서로, 앞에서 추가된 작업이 가장 먼저 처리된 후 이어서 나머지가 처리됩니다.
### 1. Microtask queue
- 마이크로태스크 큐는 Promise 처리 결과에 대한 콜백 함수와 같이 처리 우선순위가 높은 작업이 추가됩니다.

### 2. AnimationFrame Queue
- AnimationFrame Queue는 브라우저 렌더링과 관련된 태스크를 처리하는 큐로, `requestAnimationFrame`으로 등록한 콜백 함수가 추가됩니다.
- 해당 큐에 등록된 작업은 브라우저가 리페인트를 진행하기 전에 모두 처리됩니다.

### 3. (Macro) Task Queue
- (매크로)태스크 큐는 일반적으로 데이터 요청fetch, 이벤트DOM, 타이머 함수 등 비동기 처리에 대한 콜백 함수가 추가됩니다.

## Node.js 런타임 환경
- 

## 참고자료
- [자바스크립트의 핵심 '비동기' 완벽 이해](https://inpa.tistory.com/entry/%F0%9F%8C%90-js-async)
- [자바스크립트 이벤트 루프 구조 동작 원리](https://inpa.tistory.com/entry/%F0%9F%94%84-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%A3%A8%ED%94%84-%EA%B5%AC%EC%A1%B0-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC)