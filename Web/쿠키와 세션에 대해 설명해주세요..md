- 쿠키와 세션은 사용자 인증 및 상태 관리에 활용됩니다. 
- 클라이언트는 쿠키를 통해 세션 식별자를 저장하고, 서버는 세션을 통해 사용자의 상태나 인증 정보를 더 안전하게 관리할 수 있습니다.

## 쿠키Cookie
### 개념
- 쿠키는 클라이언트가 방문한 웹사이트에서 서버를 통해 클라이언트의 로컬 브라우저에 저장되는 데이터 파일입니다.
### 사용 목적
- 주로 세션 식별, 사용자 설정, 트래킹 등의 목적으로 각 사용자마다 브라우저에 고유 정보를 저장해두고 사용자를 식별하기 위해 사용합니다.
### 형식
- 쿠키는 Key-Value 형식의 쌍으로 구성된 문자열로 저장됩니다.
### 특징
#### 1. 유지 기간 Expiration
- [설명] 쿠키는 만료 날짜를 가지고 있어 특정 기간 동안 유지되었다가, 만료 날짜가 지나면 브라우저에서 자동으로 삭제됩니다.
- [설정 방법] 만료 시점은 쿠키를 저장할 때 `expires`나 `max-age` 속성으로 설정할 수 있습니다.
- [기본 설정] 만료 시점을 설정하지 않으면 기본적으로 브라우저가 종료될 때 삭제됩니다.
#### 2. 도메인 및 경로 제한
- [설명] 쿠키는 특정 도메인과 경로를 제한하여 쿠키를 사용할 수 있는 페이지를 제어할 수 있습니다.
- [설정 방법] 요청한 도메인의 경로와 쿠키의 `Domain` 속성이 일치하지 않으면 쿠키에 접근하는 것을 막을 수 있습니다.
- [기본 설정] `Domain` 속성을 입력하지 않으면 현재 도메인의 경로로 자동 설정됩니다.
#### 3. 용량 제한 및 네트워크 부하 유발
- [설명] 일반적으로 도메인 하나당 20개의 쿠키를 저장할 수 있고, 쿠키 당 최대 저장 용량은 4KB로 제한되어 많은 정보를 담을 수 없습니다.
- [문제] 쿠키는 클라이언트가 요청을 보낼 때마다 요청 헤더에 보내지므로 쿠키의 사이즈가 커질수록 네트워크 부하가 심해집니다.
#### 4. 보안 취약
- [설명] 쿠키는 요청 시 그대로 보내져 유출 및 조작의 위험으로 보안에 취약합니다.

## 세션
### 개념
- 세션은 서버에서 클라이언트 상태를 저장하기 위한 객체입니다.
### 사용 목적
- 쿠키의 보안 문제로 쿠키에는 클라이언트를 식별할 수 있는 고유 식별자(Session ID)만 저장하고, 그 외 비밀번호와 같은 사용자의 민감한 인증 정보는 서버 측에 저장해두기 위해 사용합니다.
### 형식
- 세션은 클라이언트 고유 식별자를 Key로, 해당 클라이언트에 대한 정보를 Value로 구성되는 객체 형태로 저장됩니다.
	- 클라이언트 정보 또한 세션 생성 시간, 마지막 접근 시간, 사용자 정보 등 필요한 정보가 Map 형태로 구성됩니다.
### 특징
#### 1. 보안 강화
- 세션 정보는 서버에 저장되며, 클라이언트에는 세션 식별자만 저장되므로 중요한 정보는 서버에 안전하게 저장됩니다.
- [문제] 그러나 마찬가지로 클라이언트의 Session ID를 탈취하여 요청할 수 있어 서버에서 IP를 제한하여 보안을 더 강화할 수 있습니다.
#### 2. 유효 시간
- 세션은 일정 기간 동안 유지할 수 있고, 클라이언트의 활동이 없을 때 서버 측에서 세션 정보를 만료시킬 수 있습니다.
#### 3. 저장 용량
- 서버 측에서 관리하므로 일반적으로 쿠키보다 더 많은 데이터를 저장할 수 있습니다.

## 쿠키-세션 인증 방식
### 인증 과정
1. 사용자가 웹사이트에 로그인하면 서버는 해당 사용자에 대한 새로운 세션을 생성하고, 고유한 식별자를 클라이언트에게 제공합니다.
	- 세션은 서버의 메모리, 로컬 파일, 데이터베이스 등 원하는 위치에 저장됩니다.
	- 서버는 고유 식별자(Session ID)를 Response Header의 `Set-Cookie`로 설정합니다.
2. 이후 해당 클라이언트는 요청을 보낼 때마다 매번 저장된 쿠키를 Request Header의 `Cookie`에 담습니다.
3. 서버는 쿠키에 담긴 정보를 바탕으로 클라이언트를 식별하여 세션을 이용하여 인증을 수행합니다.
### 문제
- 세션 기반 인증은 서버에서 세션 정보를 관리하고 조회해야 하기 때문에 많은 오버헤드가 발생하여 서버 리소스에 부담이 발생합니다.
- 클라이언트로부터 요청을 받으면 사용자의 인증 정보 등에 대한 클라이언트 상태를 서버 측에 저장하여 계속해서 유지해놓고 사용해야 합니다. (Stateful)
- [단점] 사용자가 증가하여 요청이 많아지면 세션 정보를 저장하기 위해 서버 부하 발생 등 성능의 문제를 일으킬 수 있고, 확장성이 떨어집니다.
- [해결 방안] 이러한 세션 기반 인증 방식의 단점을 극복하기 위해 [토큰 기반 인증 방식](/Web/%ED%86%A0%ED%81%B0%20%EC%9D%B8%EC%A6%9D%20%EB%B0%A9%EC%8B%9D%EA%B3%BC%20JWT%EC%97%90%20%EB%8C%80%ED%95%B4%20%EC%84%A4%EB%AA%85%ED%95%B4%EC%A3%BC%EC%84%B8%EC%9A%94..md)이 등장했습니다.

## 관련 질문
- 쿠키와 세션의 차이점을 설명해주세요.
- 세션이 보안이 좋은데도 쿠키를 사용하는 이유가 무엇인가요?
- 쿠키의 사용 예시를 말씀해주세요.
- 쿠키와 세션을 이용한 인증 방식을 설명해주세요.

## 참고 자료
- [JWT 토큰 인증 이란? (쿠키 vs 세션 vs 토큰)](https://inpa.tistory.com/entry/WEB-%F0%9F%93%9A-JWTjson-web-token-%EB%9E%80-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC#recentEntries)
- [자바스크립트로 쿠키(Cookie) 다루기](https://inpa.tistory.com/entry/JS-%F0%9F%93%9A-%EC%BF%A0%ED%82%A4Cookie-%EB%8B%A4%EB%A3%A8%EA%B8%B0#%E2%91%A1_expires_%EC%86%8D%EC%84%B1)